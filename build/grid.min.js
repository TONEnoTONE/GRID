var s,w,z;
(function(d){function f(a,c){var b,d,e,f,h,l,k,n,g,m=c&&c.split("/"),t=p.map,r=t&&t["*"]||{};if(a&&"."===a.charAt(0))if(c){m=m.slice(0,m.length-1);a=m.concat(a.split("/"));for(n=0;n<a.length;n+=1)if(b=a[n],"."===b)a.splice(n,1),n-=1;else if(".."===b)if(1!==n||".."!==a[2]&&".."!==a[0])0<n&&(a.splice(n-1,2),n-=2);else break;a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||r)&&t){b=a.split("/");for(n=b.length;0<n;n-=1){d=b.slice(0,n).join("/");if(m)for(g=m.length;0<g;g-=1)if(e=t[m.slice(0,
g).join("/")])if(e=e[d]){f=e;h=n;break}if(f)break;!l&&r&&r[d]&&(l=r[d],k=n)}!f&&l&&(f=l,h=k);f&&(b.splice(0,h,f),a=b.join("/"))}return a}function h(a,b){return function(){return q.apply(d,A.call(arguments,0).concat([a,b]))}}function l(a){return function(b){return f(b,a)}}function c(a){return function(b){g[a]=b}}function b(a){if(x.call(v,a)){var b=v[a];delete v[a];y[a]=!0;m.apply(d,b)}if(!x.call(g,a)&&!x.call(y,a))throw Error("No "+a);return g[a]}function e(a){var b,c=a?a.indexOf("!"):-1;-1<c&&(b=
a.substring(0,c),a=a.substring(c+1,a.length));return[b,a]}function k(a){return function(){return p&&p.n&&p.n[a]||{}}}var m,q,t,r,g={},v={},p={},y={},x=Object.prototype.hasOwnProperty,A=[].slice;t=function(a,c){var d,h=e(a),g=h[0];a=h[1];g&&(g=f(g,c),d=b(g));g?a=d&&d.normalize?d.normalize(a,l(c)):f(a,c):(a=f(a,c),h=e(a),g=h[0],a=h[1],g&&(d=b(g)));return{t:g?g+"!"+a:a,D:a,W:g,v:d}};r={F:function(a){return h(a)},e:function(a){var b=g[a];return"undefined"!==typeof b?b:g[a]={}},C:function(a){return{id:a,
uri:"",e:g[a],n:k(a)}}};m=function(a,e,f,l){var m,k,q,u,p=[],n;l=l||a;if("function"===typeof f){e=!e.length&&f.length?["require","exports","module"]:e;for(u=0;u<e.length;u+=1)if(q=t(e[u],l),k=q.t,"require"===k)p[u]=r.F(a);else if("exports"===k)p[u]=r.e(a),n=!0;else if("module"===k)m=p[u]=r.C(a);else if(x.call(g,k)||x.call(v,k)||x.call(y,k))p[u]=b(k);else if(q.v)q.v.load(q.D,h(l,!0),c(k),{}),p[u]=g[k];else throw Error(a+" missing "+k);e=f.apply(g[a],p);a&&(m&&m.e!==d&&m.e!==g[a]?g[a]=m.e:e===d&&n||
(g[a]=e))}else a&&(g[a]=f)};s=w=q=function(a,c,e,g,k){if("string"===typeof a)return r[a]?r[a](c):b(t(a,c).t);a.splice||(p=a,c.splice?(a=c,c=e,e=null):a=d);c=c||function(){};"function"===typeof e&&(e=g,g=k);g?m(d,a,c,e):setTimeout(function(){m(d,a,c,e)},4);return q};q.n=function(a){p=a;p.A&&q(p.A,p.N);return q};s.K=g;z=function(a,c,b){c.splice||(b=c,c=[]);x.call(g,a)||x.call(v,a)||(v[a]=[a,c,b])};z.L={P:!0}})();/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details
*/
z("dependencies/domReady",[],function(){function d(){if(!e){e=!0;c&&clearInterval(c);var b=m;if(e&&b.length){m=[];var d;for(d=0;d<b.length;d+=1)b[d](k)}}}function f(b){e?b(k):m.push(b);return f}var h,l,c,b="undefined"!==typeof window&&window.document,e=!b,k=b?document:null,m=[];if(b){if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1);else if(window.attachEvent){window.attachEvent("onload",d);l=document.createElement("div");try{h=null===
window.frameElement}catch(q){}l.doScroll&&h&&window.external&&(c=setInterval(function(){try{l.doScroll(),d()}catch(b){}},30))}"complete"===document.readyState&&d()}f.version="2.0.1";f.load=function(b,c,d,e){e.O?d(null):f(d)};return f});z("dependencies/requestAnimationFrame",[],function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){window.setTimeout(d,1E3/60)}});
z("appState/GameState",[],function(){return{Y:0,R:0}});z("const",[],function(){var d={a:{g:"n",h:"s",f:"e",i:"w"}};d.a.I={g:d.a.h,h:d.a.g,f:d.a.i,i:d.a.f};d.J={H:0,G:1};d.b={l:8,d:8};return d});z("game/models/Tile",["const"],function(){function d(d){this.position=d;this.c={};this.m=!1}w("const");d.prototype.reset=function(){this.c={};this.m=!1};return d});
z("data/Stages",[],function(){return[{name:"stage0",p:[{name:"verse0",u:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],c:[],pattern:{},V:[]}]}]});
z("game/controllers/StageController",["data/Stages","underscore","const"],function(d){var f=w("underscore"),h=w("const"),l={r:function(c,b,e){var k=d[b].p[e].u[c.y][c.x];return{c:l.B(c,b,e),m:0===k?!1:!0}},k:function(c,b,e){return c.x>=h.b.l||0>c.x?0:c.y>=h.b.d||0>c.y?0:d[b].p[e].u[c.y][c.x]},w:function(c,b){return c.x===b.x&&c.y===b.y+1?h.a.g:c.x===b.x&&c.y+1===b.y?h.a.h:c.x===b.x+1&&c.y===b.y?h.a.i:c.x+1===b.x&&c.y===b.y?h.a.f:!1},B:function(c,b,e){var k={};k[h.a.g]=!1;k[h.a.f]=!1;k[h.a.h]=!1;k[h.a.i]=
!1;for(var m=l.k(c,b,e),q=[c.x,c.y],t=d[b].p[e],r=0;r<t.c.length;r++){var g=t.c[r][0],v=t.c[r][1];f.isEqual(q,g)?k[l.w(g,v)]=!0:f.isEqual(q,v)&&(k[l.w(v,g)]=!0)}l.o(m,l.k({x:c.x+1,y:c.y},b,e))&&(k[h.a.f]=!0);l.o(m,l.k({x:c.x-1,y:c.y},b,e))&&(k[h.a.i]=!0);l.o(m,l.k({x:c.x,y:c.y-1},b,e))&&(k[h.a.g]=!0);l.o(m,l.k({x:c.x,y:c.y+1},b,e))&&(k[h.a.h]=!0);return k},o:function(c,b){return 1===c+b},S:function(c){return d[c].p.length}};return l});
z("game/controllers/TileController",["const","underscore","game/models/Tile","game/controllers/StageController"],function(d,f,h,l){var c;c={s:Array(d.b.d),j:function(){for(var b=0;b<d.b.d;b++)c.s[b]=Array(d.b.l);for(b=0;b<d.b.l;b++)for(var e=0;e<d.b.d;e++)c.s[e][b]=new h({x:b,y:e})},r:function(b){if(0<=b.y&&b.y<d.b.d)return c.s[b.y][b.x]},forEach:function(b){for(var e=d.b.l,k=d.b.d,f=0;f<e;f++)for(var h=0;h<k;h++){var l={x:f,y:h};b(c.r(l),l)}},reset:function(){c.forEach(function(b){b.reset()})},q:function(b,
d){c.reset();c.forEach(function(c,f){var h=l.r(f,b,d);c.c=h.c;c.m=h.m})}};c.j();return c});z("game/controllers/GameController",["underscore","appState/GameState","game/controllers/TileController"],function(){w("underscore");w("appState/GameState");var d=w("game/controllers/TileController"),f={j:function(){f.q(0,0)},T:function(){},q:function(f,l){d.q(f,l||0)}};f.j();return f});w.n({M:"./source/",U:{underscore:"dependencies/underscore","const":"data/Const"},X:{Z:{e:"_"}}});
w(["dependencies/domReady","dependencies/requestAnimationFrame","game/controllers/GameController"],function(d){var f={version:"0.0.1",j:function(){console.log("GRID version "+f.version);f.loop()},loop:function(){requestAnimationFrame(f.loop)}};d(function(){f.j()})});z("../source/main",function(){});
