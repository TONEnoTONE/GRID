(function() {function h(){return function(){}}var l,m=this;
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return void 0!==a}function p(a){return"array"==aa(a)}function ba(a){var b=aa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ca(a){return"number"==typeof a}function da(a){return"function"==aa(a)}function ea(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var fa="closure_uid_"+(1E9*Math.random()>>>0),ga=0;
function ha(a,b,c){return a.call.apply(a.bind,arguments)}function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ja(a,b,c){ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return ja.apply(null,arguments)}
function ka(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var la=Date.now||function(){return+new Date};function s(a,b){function c(){}c.prototype=b.prototype;a.j=b.prototype;a.prototype=new c};function ma(a){if(!na.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(oa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(pa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(qa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ra,"&quot;"));return a}var oa=/&/g,pa=/</g,qa=/>/g,ra=/\"/g,na=/[&<>\"]/;function t(a){return Array.prototype.join.call(arguments,"")}function sa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}
function ta(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,f){return b+f.toUpperCase()})};function ua(a,b){for(var c in a)b.call(void 0,a[c],c,a)}var va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wa(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<va.length;e++)c=va[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var xa;var u=Array.prototype,ya=u.indexOf?function(a,b,c){return u.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},za=u.forEach?function(a,b,c){u.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=r(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},Aa=u.filter?function(a,b,c){return u.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,g=r(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var w=g[k];b.call(c,w,k,a)&&(f[e++]=w)}return f},Ba=u.map?function(a,b,c){return u.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=r(a)?a.split(""):a,g=0;g<d;g++)g in e&&(f[g]=b.call(c,e[g],g,a));return f};function Ca(a,b){var c=ya(a,b),d;(d=0<=c)&&u.splice.call(a,c,1);return d}function Da(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ea(a,b,c){return 2>=arguments.length?u.slice.call(a,b):u.slice.call(a,b,c)};function x(a,b){this.x=n(a)?a:0;this.y=n(b)?b:0}l=x.prototype;l.P=function(){return new x(this.x,this.y)};l.toString=function(){return"("+this.x+", "+this.y+")"};function Fa(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}l.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};l.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};l.translate=function(a,b){a instanceof x?(this.x+=a.x,this.y+=a.y):(this.x+=a,ca(b)&&(this.y+=b));return this};
l.scale=function(a,b){var c=ca(b)?b:a;this.x*=a;this.y*=c;return this};var y,Ga,Ha,Ia;function Ja(){return m.navigator?m.navigator.userAgent:null}Ia=Ha=Ga=y=!1;var Ka;if(Ka=Ja()){var La=m.navigator;y=0==Ka.lastIndexOf("Opera",0);Ga=!y&&(-1!=Ka.indexOf("MSIE")||-1!=Ka.indexOf("Trident"));Ha=!y&&-1!=Ka.indexOf("WebKit");Ia=!y&&!Ha&&!Ga&&"Gecko"==La.product}var z=y,A=Ga,B=Ia,C=Ha,Ma=m.navigator,Na=-1!=(Ma&&Ma.platform||"").indexOf("Mac");function Oa(){var a=m.document;return a?a.documentMode:void 0}var Pa;
a:{var Qa="",Ra;if(z&&m.opera)var Sa=m.opera.version,Qa="function"==typeof Sa?Sa():Sa;else if(B?Ra=/rv\:([^\);]+)(\)|;)/:A?Ra=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:C&&(Ra=/WebKit\/(\S+)/),Ra)var Ta=Ra.exec(Ja()),Qa=Ta?Ta[1]:"";if(A){var Ua=Oa();if(Ua>parseFloat(Qa)){Pa=String(Ua);break a}}Pa=Qa}var Va={};
function D(a){var b;if(!(b=Va[a])){b=0;for(var c=String(Pa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",k=d[e]||"",w=/(\d*)(\D*)/g,F=/(\d*)(\D*)/g;do{var v=w.exec(g)||["","",""],q=F.exec(k)||["","",""];if(0==v[0].length&&0==q[0].length)break;b=((0==v[1].length?0:parseInt(v[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==v[1].length?0:parseInt(v[1],10))>(0==q[1].length?
0:parseInt(q[1],10))?1:0)||((0==v[2].length)<(0==q[2].length)?-1:(0==v[2].length)>(0==q[2].length)?1:0)||(v[2]<q[2]?-1:v[2]>q[2]?1:0)}while(0==b)}b=Va[a]=0<=b}return b}var Wa=m.document,E=Wa&&A?Oa()||("CSS1Compat"==Wa.compatMode?parseInt(Pa,10):5):void 0;function Xa(a,b){this.width=a;this.height=b}l=Xa.prototype;l.P=function(){return new Xa(this.width,this.height)};l.toString=function(){return"("+this.width+" x "+this.height+")"};l.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};l.scale=function(a,b){var c=ca(b)?b:a;this.width*=a;this.height*=c;return this};function Ya(){return C?"Webkit":B?"Moz":A?"ms":z?"O":null}function Za(){return C?"-webkit":B?"-moz":A?"-ms":z?"-o":null}function $a(a){var b=Ya();return b?(b=b.toLowerCase(),a=b+ta(a),!n(void 0)||a in void 0?a:null):null};function ab(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function bb(a,b){for(var c=ab(a),d=Ea(arguments,1),f=c.length+d.length,e=c,g=0;g<d.length;g++)0<=ya(e,d[g])||e.push(d[g]);a.className=c.join(" ");return c.length==f}function cb(a,b){var c=ab(a),d=Ea(arguments,1),c=db(c,d);a.className=c.join(" ")}function db(a,b){return Aa(a,function(a){return!(0<=ya(b,a))})};var eb=!A||A&&9<=E;!B&&!A||A&&A&&9<=E||B&&D("1.9.1");A&&D("9");function fb(a){return a?new gb(hb(a)):xa||(xa=new gb)}function ib(a,b){ua(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in jb?a.setAttribute(jb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var jb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function G(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!eb&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',ma(g.name),'"');if(g.type){e.push(' type="',ma(g.type),'"');var k={};wa(k,g);delete k.type;g=k}e.push(">");e=e.join("")}e=f.createElement(e);g&&(r(g)?e.className=g:p(g)?bb.apply(null,[e].concat(g)):ib(e,g));2<d.length&&kb(f,e,d);return e}
function kb(a,b,c){function d(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];if(!ba(e)||ea(e)&&0<e.nodeType)d(e);else{var g;a:{if(e&&"number"==typeof e.length){if(ea(e)){g="function"==typeof e.item||"string"==typeof e.item;break a}if(da(e)){g="function"==typeof e.item;break a}}g=!1}za(g?Da(e):e,d)}}}function lb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function mb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function hb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function nb(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else lb(a),a.appendChild(hb(a).createTextNode(String(b)))}function gb(a){this.R=a||m.document||document}gb.prototype.createElement=function(a){return this.R.createElement(a)};gb.prototype.createTextNode=function(a){return this.R.createTextNode(String(a))};
function ob(a){var b=a.R;a=C||"CSS1Compat"!=b.compatMode?b.body:b.documentElement;b=b.parentWindow||b.defaultView;return A&&D("10")&&b.pageYOffset!=a.scrollTop?new x(a.scrollLeft,a.scrollTop):new x(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}gb.prototype.appendChild=function(a,b){a.appendChild(b)};function H(a,b,c){r(b)?pb(a,c,b):ua(b,ka(pb,a))}function pb(a,b,c){(c=qb(a,c))&&(a.style[c]=b)}function qb(a,b){var c=sa(b);if(void 0===a.style[c]){var d=Ya()+ta(b);if(void 0!==a.style[d])return d}return c}function I(a,b){var c;a:{c=hb(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function rb(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}A&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function sb(a){if(A&&!(A&&8<=E))return a.offsetParent;var b=hb(a),c=I(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=I(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function tb(a,b,c){if(b instanceof Xa)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=ub(b);a.style.height=ub(c)}function ub(a){"number"==typeof a&&(a=Math.round(a)+"px");return a}function vb(a){var b=a.offsetWidth,c=a.offsetHeight,d=C&&!b&&!c;return n(b)&&!d||!a.getBoundingClientRect?new Xa(b,c):(a=rb(a),new Xa(a.right-a.left,a.bottom-a.top))}function J(a,b){a.style.display=b?"":"none"}var wb=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;var xb=G("div",{id:"PhoneWrapper"}),yb=G("div",{id:"PhoneScreen"}),zb=G("div",{id:"GameScreen","class":"screen"}),Ab=G("div",{id:"PartsScreen","class":"screen"}),Bb=G("div",{id:"splash","class":"screen"},"splash"),Cb=G("div",{id:"SongsScreen","class":"screen"}),Db=G("div",{id:"AnimationStyles"});document.body.appendChild(xb);xb.appendChild(yb);yb.appendChild(zb);yb.appendChild(Ab);yb.appendChild(Bb);yb.appendChild(Cb);document.body.appendChild(Db);var Eb=!A||A&&9<=E,Fb=A&&!D("9");!C||D("528");B&&D("1.9b")||A&&D("8")||z&&D("9.5")||C&&D("528");B&&!D("8")||A&&D("9");function K(){0!=Gb&&(Hb[this[fa]||(this[fa]=++ga)]=this)}var Gb=0,Hb={};K.prototype.oa=!1;K.prototype.h=function(){if(!this.oa&&(this.oa=!0,this.b(),0!=Gb)){var a=this[fa]||(this[fa]=++ga);delete Hb[a]}};K.prototype.b=function(){if(this.wa)for(;this.wa.length;)this.wa.shift()()};function Ib(a,b){this.type=a;this.currentTarget=this.target=b}l=Ib.prototype;l.b=h();l.h=h();l.v=!1;l.defaultPrevented=!1;l.za=!0;l.stopPropagation=function(){this.v=!0};l.preventDefault=function(){this.defaultPrevented=!0;this.za=!1};function Jb(a){Jb[" "](a);return a}Jb[" "]=h();function L(a,b){a&&Kb(this,a,b)}s(L,Ib);l=L.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.l=null;
function Kb(a,b,c){var d=a.type=b.type;Ib.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(B){var f;a:{try{Jb(c.nodeName);f=!0;break a}catch(e){}f=!1}f||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=C||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=C||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.state=b.state;a.l=b;b.defaultPrevented&&a.preventDefault();delete a.v}l.stopPropagation=function(){L.j.stopPropagation.call(this);this.l.stopPropagation?this.l.stopPropagation():this.l.cancelBubble=!0};
l.preventDefault=function(){L.j.preventDefault.call(this);var a=this.l;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Fb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};l.Fa=function(){return this.l};l.b=h();var Lb={f:Bb,A:function(){Lb.t()},Y:function(){J(Lb.f,!0)},t:function(){J(Lb.f,!1)}};Lb.A();var Mb;function Nb(a,b){p(b)||(b=[b]);var c=Ba(b,function(a){return r(a)?a:a.ya+" "+a.duration+"s "+a.timing+" "+a.na+"s"});H(a,"transition",c.join(","))};var Ob=[{name:"stage0",q:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},K:["red","green"]}]}];function Pb(a){switch(a){case "n":return"s";case "s":return"n";case "e":return"w";case "w":return"e";default:return"w"}}function Qb(a){switch(a){case "n":return new x(0,-1);case "s":return new x(0,1);case "w":return new x(-1,0);case "e":return new x(1,0)}return new x(0,0)}function Rb(a){switch(a){case "n":return 90;case "s":return 270;case "e":return 180}return 0}function Sb(a,b){var c=new x(a.x-b.x,a.y-b.y);return 0===c.x&&0<c.y?"n":0===c.x&&0>c.y?"s":0>c.x&&0===c.y?"e":0<c.x&&0===c.y?"w":null};var Tb=[{name:"stage0",q:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},K:["red","green"]},{name:"verse2",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},K:["red","green"]}]},{name:"stage1",q:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,
1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},K:["red","green"]}]},{name:"stage2",q:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},K:["red","green"]}]}];var M={m:Tb,Ya:function(a){M.m=a?Ob:Tb},Ta:function(a,b,c){return{d:M.Ga(a,b,c),C:0===M.m[b].q[c].D[a.y][a.x]?!1:!0}},L:function(a,b,c){return 8<=a.x||0>a.x?0:8<=a.y||0>a.y?0:M.m[b].q[c].D[a.y][a.x]},Ga:function(a,b,c){for(var d={n:!1,e:!1,s:!1,w:!1},f=M.L(a,b,c),e=[a.x,a.y],g=M.m[b].q[c],k=0;k<g.d.length;k++){var w=g.d[k][0],F=g.d[k][1];e[0]===w[0]&&e[1]===w[1]?d[Sb(w,F)]=!0:e[0]===F[0]&&e[1]===F[1]&&(d[Sb(F,w)]=!0)}M.T(f,M.L(new x(a.x+1,a.y),b,c))&&(d.e=!0);M.T(f,M.L(new x(a.x-1,a.y),b,c))&&(d.w=
!0);M.T(f,M.L(new x(a.x,a.y-1),b,c))&&(d.n=!0);M.T(f,M.L(new x(a.x,a.y+1),b,c))&&(d.s=!0);return d},T:function(a,b){return 0===a&&1===b||0===b&&1===a},Xa:function(a){return M.m[a].q.length},Ea:function(a,b){return M.m[a].q[b].K}};var Ub="closure_listenable_"+(1E6*Math.random()|0);function Vb(a){try{return!(!a||!a[Ub])}catch(b){return!1}}var Wb=0;function Xb(a,b,c,d,f){this.listener=a;this.X=null;this.src=b;this.type=c;this.capture=!!d;this.S=f;this.key=++Wb;this.G=this.O=!1}function Yb(a){a.G=!0;a.listener=null;a.X=null;a.src=null;a.S=null};function N(a){this.src=a;this.g={};this.M=0}N.prototype.add=function(a,b,c,d,f){var e=this.g[a];e||(e=this.g[a]=[],this.M++);var g=Zb(e,b,d,f);-1<g?(a=e[g],c||(a.O=!1)):(a=new Xb(b,this.src,a,!!d,f),a.O=c,e.push(a));return a};N.prototype.remove=function(a,b,c,d){if(!(a in this.g))return!1;var f=this.g[a];b=Zb(f,b,c,d);return-1<b?(Yb(f[b]),u.splice.call(f,b,1),0==f.length&&(delete this.g[a],this.M--),!0):!1};
function $b(a,b){var c=b.type;if(!(c in a.g))return!1;var d=Ca(a.g[c],b);d&&(Yb(b),0==a.g[c].length&&(delete a.g[c],a.M--));return d}N.prototype.ja=function(a){var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],f=0;f<d.length;f++)++b,Yb(d[f]);delete this.g[c];this.M--}return b};N.prototype.I=function(a,b,c,d){a=this.g[a];var f=-1;a&&(f=Zb(a,b,c,d));return-1<f?a[f]:null};
function Zb(a,b,c,d){for(var f=0;f<a.length;++f){var e=a[f];if(!e.G&&e.listener==b&&e.capture==!!c&&e.S==d)return f}return-1};var ac="closure_lm_"+(1E6*Math.random()|0),bc={},cc=0;function O(a,b,c,d,f){if(p(b)){for(var e=0;e<b.length;e++)O(a,b[e],c,d,f);return null}c=dc(c);if(Vb(a))a=a.F(b,c,d,f);else{if(!b)throw Error("Invalid event type");var e=!!d,g=ec(a);g||(a[ac]=g=new N(a));c=g.add(b,c,!1,d,f);c.X||(d=fc(),c.X=d,d.src=a,d.listener=c,a.addEventListener?a.addEventListener(b,d,e):a.attachEvent(b in bc?bc[b]:bc[b]="on"+b,d),cc++);a=c}return a}
function fc(){var a=gc,b=Eb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function hc(a,b,c,d,f){if(p(b))for(var e=0;e<b.length;e++)hc(a,b[e],c,d,f);else c=dc(c),Vb(a)?a.la(b,c,d,f):a&&(a=ec(a))&&(b=a.I(b,c,!!d,f))&&P(b)}
function P(a){if(ca(a)||!a||a.G)return!1;var b=a.src;if(Vb(b))return $b(b.r,a);var c=a.type,d=a.X;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in bc?bc[c]:bc[c]="on"+c,d);cc--;(c=ec(b))?($b(c,a),0==c.M&&(c.src=null,b[ac]=null)):Yb(a);return!0}function ic(a,b,c,d){var f=1;if(a=ec(a))if(b=a.g[b])for(b=Da(b),a=0;a<b.length;a++){var e=b[a];e&&e.capture==c&&!e.G&&(f&=!1!==jc(e,d))}return Boolean(f)}
function jc(a,b){var c=a.listener,d=a.S||a.src;a.O&&P(a);return c.call(d,b)}
function gc(a,b){if(a.G)return!0;if(!Eb){var c;if(!(c=b))a:{c=["window","event"];for(var d=m,f;f=c.shift();)if(null!=d[f])d=d[f];else{c=null;break a}c=d}f=c;c=new L(f,this);d=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var e=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==f.returnValue)f.returnValue=!0}f=[];for(e=c.currentTarget;e;e=e.parentNode)f.push(e);for(var e=a.type,k=f.length-1;!c.v&&0<=k;k--)c.currentTarget=f[k],d&=ic(f[k],e,!0,c);for(k=0;!c.v&&k<f.length;k++)c.currentTarget=
f[k],d&=ic(f[k],e,!1,c)}return d}return jc(a,new L(b,this))}function ec(a){a=a[ac];return a instanceof N?a:null}var kc="__closure_events_fn_"+(1E9*Math.random()>>>0);function dc(a){return da(a)?a:a[kc]||(a[kc]=function(b){return a.handleEvent(b)})};function Q(a){K.call(this);this.ra=a;this.W={}}s(Q,K);var lc=[];l=Q.prototype;l.F=function(a,b,c,d,f){p(b)||(lc[0]=b,b=lc);for(var e=0;e<b.length;e++){var g=O(a,b[e],c||this,d||!1,f||this.ra||this);if(!g)break;this.W[g.key]=g}return this};l.la=function(a,b,c,d,f){if(p(b))for(var e=0;e<b.length;e++)this.la(a,b[e],c,d,f);else f=f||this.ra||this,c=dc(c||this),d=!!d,b=Vb(a)?a.I(b,c,d,f):a?(a=ec(a))?a.I(b,c,d,f):null:null,b&&(P(b),delete this.W[b.key]);return this};
l.ja=function(){ua(this.W,P);this.W={}};l.b=function(){Q.j.b.call(this);this.ja()};l.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function R(a,b){this.text=this.a=null;this.ca=h();K.call(this);this.ca=b;this.a=G("div",{"class":"Button"});this.text=G("div",{"class":"ButtonTextContainer"},a);this.ma=new Q;this.ma.F(this.a,"click",this.Ca,!1,this);this.a.appendChild(this.text)}s(R,K);R.prototype.Ca=function(){this.ca(this)};R.prototype.b=function(){lb(this.a);mb(this.a);this.a=null;this.ca=h();this.ma.h();R.j.b.call(this)};var S={m:M,f:Cb,Z:null,B:[],A:function(){S.m=M.m;S.Sa=M.Sa;S.fa();S.t()},fa:function(){S.Z=G("div",{id:"SongButtons"});S.Ka();S.f.appendChild(S.Z)},Ka:function(){for(var a=0;a<Tb.length;a++){var b=Tb[a],c=new R(b.name,S.Pa);S.B.push({button:c,data:b,index:a});S.Z.appendChild(c.a)}},Wa:function(){S.B=null;lb(S.Z)},Pa:function(a){for(var b=null,c=0;c<S.B.length;c++)if(S.B[c].button===a){b=S.B[c].index;break}0<=b?(mc=b,T.showparts()):console.log("No song obj for the clicked songButton. W.T.F.?")},Y:function(){J(S.f,
!0)},t:function(){J(S.f,!1)}};S.A();function nc(a){this.position=a;this.d={};this.C=!1}nc.prototype.reset=function(){this.d={};this.C=!1};var oc=G("div",{id:"BoardView"}),pc=G("canvas",{id:"TileCanvas"}),U=null;function qc(){var a=U;a.save();a.translate(39.9,39.9);a.strokeStyle="#999";a.lineWidth=1;for(var b=0;9>b;b++)a.beginPath(),a.moveTo(0,70*b),a.lineTo(560,70*b),a.stroke();for(b=0;9>b;b++)a.beginPath(),a.moveTo(70*b,0),a.lineTo(70*b,560),a.stroke();a.restore()}function rc(a,b){var c=new x(a,b);c.translate(-39.9,-39.9);c.scale(1/70);return c.floor()}oc.appendChild(pc);U=pc.getContext("2d");tb(oc,639.8,639.8);tb(pc,639.8,639.8);
U.canvas.width=639.8;U.canvas.height=639.8;zb.appendChild(oc);O(oc,"mousedown",function(a){a.stopPropagation();a=rc(a.offsetX,a.offsetY);if(null!==sc){var b=tc(a);b&&b.C&&null===uc(a)?null!==sc&&(b=new V(sc),b.setPosition(a),0<=ya(vc,b)||vc.push(b),wc()):wc()}});O(oc,"mouseup",function(a){rc(a.offsetX,a.offsetY)});var xc=Array(8);function tc(a){var b=a.x,c=a.y;return 0<=b&&8>b&&0<=c&&8>c?xc[a.y][a.x]:null}function yc(a){for(var b=0;8>b;b++)for(var c=0;8>c;c++){var d=new x(b,c);a(tc(d),d)}}function zc(){U.clearRect(0,0,pc.width,pc.height);yc(function(a){a.reset()})}
function Ac(){qc();yc(function(a){U.save();U.translate(39.9,39.9);var b=U;if(a.C){var c=a.position.P().scale(70);a.d.s&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x+3.5,c.y+70),b.lineTo(c.x+70-3.5,c.y+70),b.stroke());a.d.n&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x+3.5,c.y),b.lineTo(c.x+70-3.5,c.y),b.stroke());a.d.w&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x,c.y+3.5),b.lineTo(c.x,c.y+70-3.5),b.stroke());a.d.e&&(b.beginPath(),b.lineWidth=
3.5,b.strokeStyle="#fff",b.moveTo(c.x+70,c.y+3.5),b.lineTo(c.x+70,c.y+70-3.5),b.stroke())}U.restore()})}for(var Bc=0;8>Bc;Bc++)xc[Bc]=Array(8);for(var Cc=0;8>Cc;Cc++)for(var Dc=0;8>Dc;Dc++)xc[Dc][Cc]=new nc(new x(Cc,Dc));var sc=null,W=[],Ec=G("div",{id:"PieceSelection"});function Fc(){for(var a=0;a<W.length;a++)W[a].h();W=[]}function Gc(a){sc=a;for(var b=0;b<W.length;b++){var c=W[b];c.type===a?Hc(c.view,!0):Hc(c.view,!1)}}function wc(){for(var a=0;a<W.length;a++)Hc(W[a].view,!1);sc=null}zb.appendChild(Ec);function X(){K.call(this);this.r=new N(this);this.Ba=this}s(X,K);X.prototype[Ub]=!0;l=X.prototype;l.ha=null;l.addEventListener=function(a,b,c,d){O(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){hc(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.ha;if(c)for(b=[];c;c=c.ha)b.push(c);var c=this.Ba,d=a.type||a;if(r(a))a=new Ib(a,c);else if(a instanceof Ib)a.target=a.target||c;else{var f=a;a=new Ib(d,c);wa(a,f)}var f=!0,e;if(b)for(var g=b.length-1;!a.v&&0<=g;g--)e=a.currentTarget=b[g],f=Ic(e,d,!0,a)&&f;a.v||(e=a.currentTarget=c,f=Ic(e,d,!0,a)&&f,a.v||(f=Ic(e,d,!1,a)&&f));if(b)for(g=0;!a.v&&g<b.length;g++)e=a.currentTarget=b[g],f=Ic(e,d,!1,a)&&f;return f};
l.b=function(){X.j.b.call(this);this.r&&this.r.ja(void 0);this.ha=null};l.F=function(a,b,c,d){return this.r.add(a,b,!1,c,d)};l.la=function(a,b,c,d){return this.r.remove(a,b,c,d)};function Ic(a,b,c,d){b=a.r.g[b];if(!b)return!0;b=Da(b);for(var f=!0,e=0;e<b.length;++e){var g=b[e];if(g&&!g.G&&g.capture==c){var k=g.listener,w=g.S||g.src;g.O&&$b(a.r,g);f=!1!==k.call(w,d)&&f}}return f&&!1!=d.za}l.I=function(a,b,c,d){return this.r.I(a,b,c,d)};function Jc(){X.call(this);this.$=Kc;this.startTime=null}s(Jc,X);var Kc=0;function Lc(a,b,c){if(da(a))c&&(a=ja(a,c));else if(a&&"function"==typeof a.handleEvent)a=ja(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:m.setTimeout(a,b||0)};function Mc(a,b,c,d,f){Jc.call(this);this.k=a;this.Da=b;this.Ja=c;this.pa=d;this.Ua=p(f)?f:[f]}s(Mc,Jc);l=Mc.prototype;
l.play=function(){if(1==this.$)return!1;this.dispatchEvent("begin");this.dispatchEvent("play");this.startTime=la();this.$=1;if(!n(Mb))if(A)Mb=D("10.0");else{var a=document.createElement("div"),b=Za();a.innerHTML='<div style="'+(b?b+"-transition:opacity 1s linear;":"")+'transition:opacity 1s linear;">';a=a.firstChild;b=a.style[sa("transition")];Mb=""!=("undefined"!==typeof b?b:a.style[qb(a,"transition")]||"")}if(Mb)return H(this.k,this.Ja),this.Aa=Lc(this.Ra,void 0,this),!0;this.ka(!1);return!1};
l.Ra=function(){Nb(this.k,this.Ua);H(this.k,this.pa);this.Aa=Lc(ja(this.ka,this,!1),1E3*this.Da)};l.stop=function(){1==this.$&&this.ka(!0)};l.ka=function(a){H(this.k,"transition","");m.clearTimeout(this.Aa);H(this.k,this.pa);la();this.$=Kc;a?this.dispatchEvent("stop"):this.dispatchEvent("finish");this.dispatchEvent("end")};l.b=function(){this.stop();Mc.j.b.call(this)};function Nc(a){K.call(this);this.c=a;this.a=G("div",{"class":"PieceView"});this.aa=G("canvas",{id:"PieceViewCanvas"});this.p=G("div",{id:"MouseLayer"});this.a.appendChild(this.p);this.a.appendChild(this.aa);this.context=this.aa.getContext("2d");bb(this.a,this.c.type);this.ta=new Q;this.ta.F(this.p,["touchstart","mousedown"],this.La,!1,this);this.va=new Q;this.va.F(this.p,["touchend","click","mouseup","touchcancel","mouseout"],this.Na,!1,this);this.ua=new Q;this.ua.F(this.p,["touchmove","mousemove"],
this.Ma,!1,this);this.selected=this.da=!1;this.qa=!0;this.N=0;this.c.selection?Ec.appendChild(this.a):(this.selected=!0,bb(this.p,"expanded"));this.size();this.context.moveTo(47.6,11.2);this.context.lineTo(11.2,35);this.context.lineTo(47.6,58.8);this.context.strokeStyle=Oc(this.c.type);this.context.lineWidth=11.2;this.context.lineCap="round";this.context.lineJoin="round";this.context.stroke()}s(Nc,K);l=Nc.prototype;
l.b=function(){this.ta.h();this.va.h();this.ua.h();lb(this.a);mb(this.a);this.c=this.a=null;Nc.j.b.call(this)};l.La=function(a){a.preventDefault();a.stopPropagation();this.selected=!0;this.c.selection?Gc(this.c.type):bb(this.p,"expanded")};function Hc(a,b){b?bb(a.a,"selected"):cb(a.a,"selected")}l.Na=function(a){a.preventDefault();a.stopPropagation();!this.selected||this.da||this.c.selection||this.qa||(Gc(this.c.type),a=this.c,Ca(vc,a)&&a.h());this.qa=this.da=this.selected=!1;cb(this.p,"expanded")};
l.Ma=function(a){a.preventDefault();a.stopPropagation();this.da=!0;if(this.selected&&!this.c.selection){var b=a.type;"touchstart"==b||"touchmove"==b?Kb(a,a.l.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||Kb(a,a.l.changedTouches[0],a.currentTarget);var c=this.p;if("none"!=I(c,"display"))b=vb(c);else{var b=c.style,d=b.display,f=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";c=vb(c);b.display=d;b.position=e;b.visibility=f;b=c}var g;d=this.p;
if(1==d.nodeType){var k;if(d.getBoundingClientRect)k=rb(d),k=new x(k.left,k.top);else{f=ob(fb(d));var c=hb(d),w=I(d,"position"),F=B&&c.getBoxObjectFor&&!d.getBoundingClientRect&&"absolute"==w&&(k=c.getBoxObjectFor(d))&&(0>k.screenX||0>k.screenY),e=new x(0,0),v;k=c?hb(c):document;(v=!A)||(v=A&&9<=E)||(v="CSS1Compat"==fb(k).R.compatMode);v=v?k.documentElement:k.body;if(d!=v)if(d.getBoundingClientRect)k=rb(d),c=ob(fb(c)),e.x=k.left+c.x,e.y=k.top+c.y;else if(c.getBoxObjectFor&&!F)k=c.getBoxObjectFor(d),
c=c.getBoxObjectFor(v),e.x=k.screenX-c.screenX,e.y=k.screenY-c.screenY;else{k=d;do{e.x+=k.offsetLeft;e.y+=k.offsetTop;k!=d&&(e.x+=k.clientLeft||0,e.y+=k.clientTop||0);if(C&&"fixed"==I(k,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}k=k.offsetParent}while(k&&k!=d);if(z||C&&"absolute"==w)e.y-=c.body.offsetTop;for(k=d;(k=sb(k))&&k!=c.body&&k!=v;)e.x-=k.scrollLeft,z&&"TR"==k.tagName||(e.y-=k.scrollTop)}k=new x(e.x-f.x,e.y-f.y)}if(B&&!D(12)){A?g="-ms-transform":C?g="-webkit-transform":
z?g="-o-transform":B&&(g="-moz-transform");var q;g&&(q=I(d,g));q||(q=I(d,"transform"));g=q?(g=q.match(wb))?new x(parseFloat(g[1]),parseFloat(g[2])):new x(0,0):new x(0,0);g=new x(k.x+g.x,k.y+g.y)}else g=k}else g=da(d.Fa),q=d,d.targetTouches?q=d.targetTouches[0]:g&&d.l.targetTouches&&(q=d.l.targetTouches[0]),g=new x(q.clientX,q.clientY);a=new x(a.clientX-g.x,a.clientY-g.y);a.translate(-b.width/2,-b.height/2);a=rc(a.x,a.y);a=Sb(new x(-1,-1),a);null!==a&&(b=this.c,b.direction!==a&&(b.direction=a,Pc(b.view)))}};
l.size=function(){tb(this.aa,70,70);this.context.canvas.height=70;this.context.canvas.width=70};function Pc(a){var b=a.c;if(!b.selection){b.ga?oc.appendChild(a.a):mb(a.a);var c=b.direction,b=b.position.P().scale(70).translate(39.9,39.9),b=t("translate( ",b.x,"px , ",b.y,"px)"),c=Rb(c)-a.N%360;-180>c?c+=360:180<c&&(c-=360);a.N+=c;c=t(b,t("rotate( ",a.N,"deg) "));H(a.a,"transition","");H(a.a,{transform:c,transition:t(Za(),"-transform 50ms")})}};function Qc(a){K.call(this);this.c=a;this.style=G("style",{id:"animStyle_"+a.uid});this.animationName="animation_"+a.uid;Db.appendChild(this.style)}s(Qc,K);
function Rc(a,b,c){a=t("@",b,"keyframes ",a.animationName," { \n");for(var d=c.length,f=0;f<d;f++){var e=t,g=(100*(f/(d-1))).toFixed(2),k=b,k=k||"",w=c[f].view.c,F=w.position.P().scale(70).translate(39.9,39.9);a=t(a,e(g,"% {",t(k,"transform : ",t("translate( ",F.x,"px , ",F.y,"px) "),t("rotate( ",Rb(w.direction),"deg) "),"; "),"} \n"))}return a=t(a,"} \n")}Qc.prototype.b=function(){lb(this.style);mb(this.style);this.c=this.style=null;Qc.j.b.call(this)};function Sc(a){this.c=a;K.call(this)}s(Sc,K);Sc.prototype.b=function(){this.c=null;Sc.j.b.call(this)};function Tc(a,b){K.call(this);this.position=a;this.direction=b;this.view=new Sc(this)}s(Tc,K);Tc.prototype.b=function(){this.view.h();this.view=null;Tc.j.b.call(this)};function Uc(){K.call(this);this.o=[];this.uid=Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36);this.view=new Qc(this)}s(Uc,K);function Vc(a){var b=a.o.length;if(1<b){var c=a.o[0].position,d=a.o[b-1].position;return a.o[b-1].direction===a.o[0].direction&&Fa(c,d)}return!1}Uc.prototype.b=function(){for(var a=0;a<this.o.length;a++)this.o[a].h();this.o=null;this.view.h();this.view=null;Uc.j.b.call(this)};function V(a,b){K.call(this);this.type=a||Wc;this.direction="w";this.position=new x(-1,-1);this.H=new Uc;this.selection=b||!1;this.ga=!1;this.view=new Nc(this)}s(V,K);V.prototype.setPosition=function(a){Fa(a,this.position)||(this.ga=!0,this.position=a,Pc(this.view))};V.prototype.b=function(){this.H.h();this.H=null;this.view.h();this.view=null;V.j.b.call(this)};
V.prototype.play=function(){var a=this.H.view,b=this.H.o,c=Za()+"-",d;d=t("",Rc(a,"",b));d=t(d,Rc(a,c,b));nb(a.style,d);b=this.view.a.style;a=t(a.animationName," ","4s"," linear infinite");n(b.animation)?(b.animation=a,b.animationPlayState="running"):n(b[$a("animation")])&&(b[$a("animation")]=a,b[$a("animationPlayState")]="running")};V.prototype.stop=function(){var a=this.view.a.style;n(a.animation)?a.animation="":n(a[$a("animation")])&&(a[$a("animation")]="")};var Wc="red";
function Oc(a){switch(a){case "green":return"#53CC66";case "blue":return"#0092D2";case "yellow":return"#F58107";case "purple":return"#CA60CA"}return"#d4463f"};var vc=[];function Xc(a){for(var b=0,c=vc.length;b<c;b++)a(vc[b],b)}function uc(a){var b=null;Xc(function(c){Fa(c.position,a)&&(b=c)});return b}function Yc(){Xc(function(a){a.h()});vc=[];Fc()}function Zc(){Xc(function(a){a.play()})}function $c(){Xc(function(a){a.stop()})};var ad=!1;function bd(){Xc(function(a){if(a.ga)for(var b=new Tc(a.position,a.direction);!Vc(a.H);)a.H.o.push(b),b=tc(b.position).d[b.direction]?new Tc(tc(b.position).position,Pb(b.direction)):new Tc(new x(tc(b.position).position.x+Qb(b.direction).x,tc(b.position).position.y+Qb(b.direction).y),b.direction)})}var cd=0;Yc();cd=cd||0;(function(a){zc();yc(function(b,c){var d=M.Ta(c,0,a);b.d=d.d;b.C=d.C});Ac()})(cd);var dd=cd;Yc();for(var ed=M.Ea(0,dd),fd=0;fd<ed.length;fd++){var gd=new V(ed[fd],!0);W.push(gd)};var Y={f:zb,xa:null,A:function(){Y.t();Y.xa=new R("PLAY",Y.Qa);Y.f.appendChild(Y.xa.a)},Y:function(){J(Y.f,!0)},t:function(){J(Y.f,!1)},Qa:function(a){ad?(ad&&(ad=!1,$c()),nb(a.text,"PLAY"),cb(a.a,"playing")):(ad||(ad=!0,bd(),Zc()),nb(a.text,"STOP"),bb(a.a,"playing"))}};Y.A();var mc=-1;var Z={m:M,f:Ab,J:null,ia:[],A:function(){Z.J=G("div",{id:"PartsButtons"});Z.fa();Z.t()},fa:function(){Z.J=G("div",{id:"PartsButtons"});Z.sa();Z.f.appendChild(Z.J)},sa:function(){var a=mc;if(0<=a)for(var a=Tb[a].q,b=0;b<a.length;b++){var c=a[b],d=new R(c.name,Z.Oa);Z.ia.push({button:d,data:c,index:b});Z.J.appendChild(d.a)}},Va:function(){Z.B=null;lb(Z.J)},Oa:function(a){for(var b=null,c=0;c<Z.B.length;c++)if(Z.ia[c].button===a){b=Z.ia[c].index;break}b?(mc=b,T.showgame()):console.log("No song obj for the clicked partButton. W.T.F.?")},
Y:function(){Z.sa();J(Z.f,!0)},t:function(){J(Z.f,!1)}};Z.A();var $={};function hd(a){var b=new Mc($[a].f,0.5,{opacity:0},{opacity:1},{ya:"opacity",duration:0.5,timing:"ease-in",na:0});O(b,"finish",h());$[a].Y();b.play()}function id(a){var b=new Mc($[a].f,0.5,{opacity:1},{opacity:0},{ya:"opacity",duration:0.5,timing:"ease-in",na:0});O(b,"finish",function(){T.transition();$[a].t()});b.play()}$.SCREEN_SPLASH=Lb;$.SCREEN_SONGS=S;$.SCREEN_PARTS=Z;$.SCREEN_GAME=Y;function jd(){var a=kd;setTimeout(function(){a()},200)};var T={};function kd(){T.showsongs()}
T=StateMachine.create({events:[{name:"start",from:"none",to:"splash"},{name:"showsongs",from:["splash","parts","game"],to:"songs"},{name:"showparts",from:["songs","game"],to:"parts"},{name:"showgame",from:["splash","parts","songs"],to:"game"}],callbacks:{onbeforestart:h(),onbeforeshowsongs:h(),onbeforeshowparts:h(),onbeforeshowgame:h(),onstart:function(){hd("SCREEN_SPLASH");jd()},onshowsongs:function(){hd("SCREEN_SONGS")},onshowparts:function(){hd("SCREEN_PARTS")},onshowgame:function(){hd("SCREEN_GAME")},
onleavesplash:function(){id("SCREEN_SPLASH");return StateMachine.ASYNC},onleavesongs:function(){id("SCREEN_SONGS");return StateMachine.ASYNC},onleaveparts:function(){id("SCREEN_PARTS");return StateMachine.ASYNC},onleavegame:function(){id("SCREEN_GAME");return StateMachine.ASYNC},onsplash:function(){console.log("ENTER   STATE: onsplash")},onsongs:function(){console.log("ENTER   STATE: onsongs")},onparts:function(){console.log("ENTER   STATE: onparts")},ongame:function(){console.log("ENTER   STATE: ongame")},
onchangestate:function(a,b,c){console.log("CHANGED STATE: "+b+" to "+c)}}});function ld(a,b,c,d,f){if(!(A||C&&D("525")))return!0;if(Na&&f)return md(a);if(f&&!d||!c&&(17==b||18==b||Na&&91==b))return!1;if(C&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(A&&d&&b==a)return!1;switch(a){case 13:return!(A&&A&&9<=E);case 27:return!C}return md(a)}
function md(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||C&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function nd(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function od(a,b){X.call(this);a&&(this.V&&this.detach(),this.k=a,this.U=O(this.k,"keypress",this,b),this.ea=O(this.k,"keydown",this.Ha,b,this),this.V=O(this.k,"keyup",this.Ia,b,this))}s(od,X);l=od.prototype;l.k=null;l.U=null;l.ea=null;l.V=null;l.i=-1;l.u=-1;l.ba=!1;
var pd={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},qd={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},rd=A||C&&D("525"),sd=Na&&B;l=od.prototype;
l.Ha=function(a){C&&(17==this.i&&!a.ctrlKey||18==this.i&&!a.altKey||Na&&91==this.i&&!a.metaKey)&&(this.u=this.i=-1);-1==this.i&&(a.ctrlKey&&17!=a.keyCode?this.i=17:a.altKey&&18!=a.keyCode?this.i=18:a.metaKey&&91!=a.keyCode&&(this.i=91));rd&&!ld(a.keyCode,this.i,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.u=B?nd(a.keyCode):a.keyCode,sd&&(this.ba=a.altKey))};l.Ia=function(a){this.u=this.i=-1;this.ba=a.altKey};
l.handleEvent=function(a){var b=a.l,c,d,f=b.altKey;A&&"keypress"==a.type?(c=this.u,d=13!=c&&27!=c?b.keyCode:0):C&&"keypress"==a.type?(c=this.u,d=0<=b.charCode&&63232>b.charCode&&md(c)?b.charCode:0):z?(c=this.u,d=md(c)?b.keyCode:0):(c=b.keyCode||this.u,d=b.charCode||0,sd&&(f=this.ba),Na&&63==d&&224==c&&(c=191));var e=c,g=b.keyIdentifier;c?63232<=c&&c in pd?e=pd[c]:25==c&&a.shiftKey&&(e=9):g&&g in qd&&(e=qd[g]);a=e==this.i;this.i=e;b=new td(e,d,a,b);b.altKey=f;this.dispatchEvent(b)};
l.detach=function(){this.U&&(P(this.U),P(this.ea),P(this.V),this.V=this.ea=this.U=null);this.k=null;this.u=this.i=-1};l.b=function(){od.j.b.call(this);this.detach()};function td(a,b,c,d){d&&Kb(this,d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}s(td,L);var ud=new od(document);O(ud,"key",function(a){71==a.keyCode?(console.log("Going to GameScreen"),T.showgame()):83==a.keyCode?(console.log("Going to SongsScreen"),T.showsongs()):80==a.keyCode&&(console.log("Going to PartsScreen"),T.showparts())});console.log("GRID version 0.0.2");T.start();})();
