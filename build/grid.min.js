var s,t,z;
(function(c){function f(b,a){var c,l,d,f,e,m,g,n,k,h=a&&a.split("/"),r=q.map,u=r&&r["*"]||{};if(b&&"."===b.charAt(0))if(a){h=h.slice(0,h.length-1);b=h.concat(b.split("/"));for(n=0;n<b.length;n+=1)if(c=b[n],"."===c)b.splice(n,1),n-=1;else if(".."===c)if(1!==n||".."!==b[2]&&".."!==b[0])0<n&&(b.splice(n-1,2),n-=2);else break;b=b.join("/")}else 0===b.indexOf("./")&&(b=b.substring(2));if((h||u)&&r){c=b.split("/");for(n=c.length;0<n;n-=1){l=c.slice(0,n).join("/");if(h)for(k=h.length;0<k;k-=1)if(d=r[h.slice(0,
k).join("/")])if(d=d[l]){f=d;e=n;break}if(f)break;!m&&u&&u[l]&&(m=u[l],g=n)}!f&&m&&(f=m,e=g);f&&(c.splice(0,e,f),b=c.join("/"))}return b}function e(b,a){return function(){return p.apply(c,A.call(arguments,0).concat([b,a]))}}function d(b){return function(a){return f(a,b)}}function a(b){return function(a){k[b]=a}}function l(b){if(x.call(w,b)){var a=w[b];delete w[b];y[b]=!0;h.apply(c,a)}if(!x.call(k,b)&&!x.call(y,b))throw Error("No "+b);return k[b]}function m(b){var a,c=b?b.indexOf("!"):-1;-1<c&&(a=
b.substring(0,c),b=b.substring(c+1,b.length));return[a,b]}function g(b){return function(){return q&&q.n&&q.n[b]||{}}}var h,p,u,r,k={},w={},q={},y={},x=Object.prototype.hasOwnProperty,A=[].slice;u=function(b,a){var c,h=m(b),e=h[0];b=h[1];e&&(e=f(e,a),c=l(e));e?b=c&&c.normalize?c.normalize(b,d(a)):f(b,a):(b=f(b,a),h=m(b),e=h[0],b=h[1],e&&(c=l(e)));return{t:e?e+"!"+b:b,D:b,W:e,v:c}};r={F:function(b){return e(b)},e:function(b){var a=k[b];return"undefined"!==typeof a?a:k[b]={}},C:function(b){return{id:b,
uri:"",e:k[b],n:g(b)}}};h=function(b,d,h,f){var m,g,p,v,q=[],n;f=f||b;if("function"===typeof h){d=!d.length&&h.length?["require","exports","module"]:d;for(v=0;v<d.length;v+=1)if(p=u(d[v],f),g=p.t,"require"===g)q[v]=r.F(b);else if("exports"===g)q[v]=r.e(b),n=!0;else if("module"===g)m=q[v]=r.C(b);else if(x.call(k,g)||x.call(w,g)||x.call(y,g))q[v]=l(g);else if(p.v)p.v.load(p.D,e(f,!0),a(g),{}),q[v]=k[g];else throw Error(b+" missing "+g);d=h.apply(k[b],q);b&&(m&&m.e!==c&&m.e!==k[b]?k[b]=m.e:d===c&&n||
(k[b]=d))}else b&&(k[b]=h)};s=t=p=function(b,a,d,e,g){if("string"===typeof b)return r[b]?r[b](a):l(u(b,a).t);b.splice||(q=b,a.splice?(b=a,a=d,d=null):b=c);a=a||function(){};"function"===typeof d&&(d=e,e=g);e?h(c,b,a,d):setTimeout(function(){h(c,b,a,d)},4);return p};p.n=function(b){q=b;q.A&&p(q.A,q.N);return p};s.K=k;z=function(b,a,c){a.splice||(c=a,a=[]);x.call(k,b)||x.call(w,b)||(w[b]=[b,a,c])};z.L={P:!0}})();/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details
*/
z("dependencies/domReady",[],function(){function c(){if(!m){m=!0;a&&clearInterval(a);var c=h;if(m&&c.length){h=[];var d;for(d=0;d<c.length;d+=1)c[d](g)}}}function f(a){m?a(g):h.push(a);return f}var e,d,a,l="undefined"!==typeof window&&window.document,m=!l,g=l?document:null,h=[];if(l){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c);d=document.createElement("div");try{e=null===
window.frameElement}catch(p){}d.doScroll&&e&&window.external&&(a=setInterval(function(){try{d.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}f.version="2.0.1";f.load=function(a,c,d,l){l.O?d(null):f(d)};return f});z("dependencies/requestAnimationFrame",[],function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}});
z("appState/GameState",[],function(){return{Y:0,R:0}});z("const",[],function(){var c={a:{g:"n",h:"s",f:"e",i:"w"}};c.a.I={g:c.a.h,h:c.a.g,f:c.a.i,i:c.a.f};c.J={H:0,G:1};c.b={l:8,d:8};return c});z("game/models/Tile",["const"],function(){function c(c){this.position=c;this.c={};this.m=!1}t("const");c.prototype.reset=function(){this.c={};this.m=!1};return c});
z("data/Stages",[],function(){return[{name:"stage0",p:[{name:"verse0",u:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],c:[],pattern:{},V:[]}]}]});
z("game/controllers/StageController",["data/Stages","underscore","const"],function(c){var f=t("underscore"),e=t("const"),d={r:function(a,l,e){var g=c[l].p[e].u[a.y][a.x];return{c:d.B(a,l,e),m:0===g?!1:!0}},k:function(a,d,f){return a.x>=e.b.l||0>a.x?0:a.y>=e.b.d||0>a.y?0:c[d].p[f].u[a.y][a.x]},w:function(a,c){return a.x===c.x&&a.y===c.y+1?e.a.g:a.x===c.x&&a.y+1===c.y?e.a.h:a.x===c.x+1&&a.y===c.y?e.a.i:a.x+1===c.x&&a.y===c.y?e.a.f:!1},B:function(a,l,m){var g={};g[e.a.g]=!1;g[e.a.f]=!1;g[e.a.h]=!1;g[e.a.i]=
!1;for(var h=d.k(a,l,m),p=[a.x,a.y],u=c[l].p[m],r=0;r<u.c.length;r++){var k=u.c[r][0],w=u.c[r][1];f.isEqual(p,k)?g[d.w(k,w)]=!0:f.isEqual(p,w)&&(g[d.w(w,k)]=!0)}d.o(h,d.k({x:a.x+1,y:a.y},l,m))&&(g[e.a.f]=!0);d.o(h,d.k({x:a.x-1,y:a.y},l,m))&&(g[e.a.i]=!0);d.o(h,d.k({x:a.x,y:a.y-1},l,m))&&(g[e.a.g]=!0);d.o(h,d.k({x:a.x,y:a.y+1},l,m))&&(g[e.a.h]=!0);return g},o:function(a,c){return 1===a+c},S:function(a){return c[a].p.length}};return d});
z("game/controllers/TileController",["const","underscore","game/models/Tile","game/controllers/StageController"],function(){var c=t("const");t("underscore");var f=t("game/models/Tile"),e=t("game/controllers/StageController"),d={s:Array(c.b.d),j:function(){for(var a=0;a<c.b.d;a++)d.s[a]=Array(c.b.l);for(a=0;a<c.b.l;a++)for(var e=0;e<c.b.d;e++)d.s[e][a]=new f({x:a,y:e})},r:function(a){if(0<=a.y&&a.y<c.b.d)return d.s[a.y][a.x]},forEach:function(a){for(var e=c.b.l,f=c.b.d,g=0;g<e;g++)for(var h=0;h<f;h++){var p=
{x:g,y:h};a(d.r(p),p)}},reset:function(){d.forEach(function(a){a.reset()})},q:function(a,c){d.reset();d.forEach(function(d,g){var f=e.r(g,a,c);d.c=f.c;d.m=f.m})}};d.j();return d});z("game/controllers/GameController",["underscore","appState/GameState","game/controllers/TileController"],function(){t("underscore");t("appState/GameState");var c=t("game/controllers/TileController"),f={j:function(){f.q(0,0)},T:function(){},q:function(e,d){c.q(e,d||0)}};f.j();return f});
t.n({M:"./source/",U:{underscore:"dependencies/underscore","const":"data/Const"},X:{Z:{e:"_"}}});t(["dependencies/domReady","dependencies/requestAnimationFrame","game/controllers/GameController"],function(c){var f={version:"0.0.1",j:function(){console.log("GRID version "+f.version);f.loop()},loop:function(){requestAnimationFrame(f.loop)}};c(function(){f.j()})});z("../source/main",function(){});
