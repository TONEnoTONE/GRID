(function() {function h(){return function(){}}var l,m=this;
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return void 0!==a}function q(a){return"array"==aa(a)}function ba(a){var b=aa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ca(a){return"function"==aa(a)}function da(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ea="closure_uid_"+(1E9*Math.random()>>>0),fa=0;function ga(a,b,c){return a.call.apply(a.bind,arguments)}
function ha(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ia(a,b,c){ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ga:ha;return ia.apply(null,arguments)}
function ja(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ka=Date.now||function(){return+new Date};function t(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function la(a){if(!ma.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(na,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(oa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(pa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(qa,"&quot;"));return a}var na=/&/g,oa=/</g,pa=/>/g,qa=/\"/g,ma=/[&<>\"]/;function u(a){return Array.prototype.join.call(arguments,"")}function ra(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}
function sa(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var ta="closure_listenable_"+(1E6*Math.random()|0);function ua(a){try{return!(!a||!a[ta])}catch(b){return!1}}var va=0;function wa(a,b,c,d,e){this.listener=a;this.X=null;this.src=b;this.type=c;this.capture=!!d;this.R=e;this.key=++va;this.F=this.O=!1}function xa(a){a.F=!0;a.listener=null;a.X=null;a.src=null;a.R=null};function ya(a,b){for(var c in a)b.call(void 0,a[c],c,a)}var za="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Aa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<za.length;f++)c=za[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var v=Array.prototype,Ba=v.indexOf?function(a,b,c){return v.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ca=v.forEach?function(a,b,c){v.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Da=v.filter?function(a,b,c){return v.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=r(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var p=g[k];b.call(c,p,k,a)&&(e[f++]=p)}return e},Ea=v.map?function(a,b,c){return v.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=r(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};function Fa(a,b){var c=Ba(a,b),d;(d=0<=c)&&v.splice.call(a,c,1);return d}function Ga(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ha(a,b,c){return 2>=arguments.length?v.slice.call(a,b):v.slice.call(a,b,c)};function w(a){this.src=a;this.f={};this.M=0}w.prototype.add=function(a,b,c,d,e){var f=this.f[a];f||(f=this.f[a]=[],this.M++);var g=Ia(f,b,d,e);-1<g?(a=f[g],c||(a.O=!1)):(a=new wa(b,this.src,a,!!d,e),a.O=c,f.push(a));return a};w.prototype.remove=function(a,b,c,d){if(!(a in this.f))return!1;var e=this.f[a];b=Ia(e,b,c,d);return-1<b?(xa(e[b]),v.splice.call(e,b,1),0==e.length&&(delete this.f[a],this.M--),!0):!1};
function Ja(a,b){var c=b.type;if(!(c in a.f))return!1;var d=Fa(a.f[c],b);d&&(xa(b),0==a.f[c].length&&(delete a.f[c],a.M--));return d}w.prototype.fa=function(a){var b=0,c;for(c in this.f)if(!a||c==a){for(var d=this.f[c],e=0;e<d.length;e++)++b,xa(d[e]);delete this.f[c];this.M--}return b};w.prototype.G=function(a,b,c,d){a=this.f[a];var e=-1;a&&(e=Ia(a,b,c,d));return-1<e?a[e]:null};
function Ia(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.F&&f.listener==b&&f.capture==!!c&&f.R==d)return e}return-1};var Ka,La,Ma,Na;function Oa(){return m.navigator?m.navigator.userAgent:null}Na=Ma=La=Ka=!1;var Pa;if(Pa=Oa()){var Qa=m.navigator;Ka=0==Pa.lastIndexOf("Opera",0);La=!Ka&&(-1!=Pa.indexOf("MSIE")||-1!=Pa.indexOf("Trident"));Ma=!Ka&&-1!=Pa.indexOf("WebKit");Na=!Ka&&!Ma&&!La&&"Gecko"==Qa.product}var x=Ka,y=La,z=Na,A=Ma,Ra=m.navigator,Sa=-1!=(Ra&&Ra.platform||"").indexOf("Mac");function Ta(){var a=m.document;return a?a.documentMode:void 0}var Ua;
a:{var Va="",Wa;if(x&&m.opera)var Xa=m.opera.version,Va="function"==typeof Xa?Xa():Xa;else if(z?Wa=/rv\:([^\);]+)(\)|;)/:y?Wa=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:A&&(Wa=/WebKit\/(\S+)/),Wa)var Ya=Wa.exec(Oa()),Va=Ya?Ya[1]:"";if(y){var Za=Ta();if(Za>parseFloat(Va)){Ua=String(Za);break a}}Ua=Va}var $a={};
function B(a){var b;if(!(b=$a[a])){b=0;for(var c=String(Ua).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",p=/(\d*)(\D*)/g,s=/(\d*)(\D*)/g;do{var K=p.exec(g)||["","",""],L=s.exec(k)||["","",""];if(0==K[0].length&&0==L[0].length)break;b=((0==K[1].length?0:parseInt(K[1],10))<(0==L[1].length?0:parseInt(L[1],10))?-1:(0==K[1].length?0:parseInt(K[1],10))>(0==L[1].length?
0:parseInt(L[1],10))?1:0)||((0==K[2].length)<(0==L[2].length)?-1:(0==K[2].length)>(0==L[2].length)?1:0)||(K[2]<L[2]?-1:K[2]>L[2]?1:0)}while(0==b)}b=$a[a]=0<=b}return b}var ab=m.document,bb=ab&&y?Ta()||("CSS1Compat"==ab.compatMode?parseInt(Ua,10):5):void 0;var cb=!y||y&&9<=bb,db=y&&!B("9");!A||B("528");z&&B("1.9b")||y&&B("8")||x&&B("9.5")||A&&B("528");z&&!B("8")||y&&B("9");function C(){0!=eb&&(fb[this[ea]||(this[ea]=++fa)]=this)}var eb=0,fb={};C.prototype.la=!1;C.prototype.i=function(){if(!this.la&&(this.la=!0,this.b(),0!=eb)){var a=this[ea]||(this[ea]=++fa);delete fb[a]}};C.prototype.b=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};function gb(a,b){this.type=a;this.currentTarget=this.target=b}l=gb.prototype;l.b=h();l.i=h();l.v=!1;l.defaultPrevented=!1;l.sa=!0;l.preventDefault=function(){this.defaultPrevented=!0;this.sa=!1};function hb(a){hb[" "](a);return a}hb[" "]=h();function ib(a,b){a&&jb(this,a,b)}t(ib,gb);l=ib.prototype;l.target=null;l.relatedTarget=null;l.offsetX=0;l.offsetY=0;l.clientX=0;l.clientY=0;l.screenX=0;l.screenY=0;l.button=0;l.keyCode=0;l.charCode=0;l.ctrlKey=!1;l.altKey=!1;l.shiftKey=!1;l.metaKey=!1;l.C=null;
function jb(a,b,c){var d=a.type=b.type;gb.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(z){var e;a:{try{hb(c.nodeName);e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=A||void 0!==b.offsetX?b.offsetX:b.layerX;a.offsetY=A||void 0!==b.offsetY?b.offsetY:b.layerY;a.clientX=void 0!==b.clientX?b.clientX:b.pageX;a.clientY=void 0!==b.clientY?b.clientY:b.pageY;a.screenX=b.screenX||0;
a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.state=b.state;a.C=b;b.defaultPrevented&&a.preventDefault();delete a.v}l.preventDefault=function(){ib.h.preventDefault.call(this);var a=this.C;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,db)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};l.ya=function(){return this.C};
l.b=h();var kb="closure_lm_"+(1E6*Math.random()|0),lb={},mb=0;function D(a,b,c,d,e){if(q(b)){for(var f=0;f<b.length;f++)D(a,b[f],c,d,e);return null}c=nb(c);if(ua(a))a=a.da(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=ob(a);g||(a[kb]=g=new w(a));c=g.add(b,c,!1,d,e);c.X||(d=pb(),c.X=d,d.src=a,d.listener=c,a.addEventListener?a.addEventListener(b,d,f):a.attachEvent(b in lb?lb[b]:lb[b]="on"+b,d),mb++);a=c}return a}
function pb(){var a=qb,b=cb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function rb(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)rb(a,b[f],c,d,e);else c=nb(c),ua(a)?a.ha(b,c,d,e):a&&(a=ob(a))&&(b=a.G(b,c,!!d,e))&&E(b)}
function E(a){if("number"==typeof a||!a||a.F)return!1;var b=a.src;if(ua(b))return Ja(b.p,a);var c=a.type,d=a.X;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in lb?lb[c]:lb[c]="on"+c,d);mb--;(c=ob(b))?(Ja(c,a),0==c.M&&(c.src=null,b[kb]=null)):xa(a);return!0}function sb(a,b,c,d){var e=1;if(a=ob(a))if(b=a.f[b])for(b=Ga(b),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.F&&(e&=!1!==tb(f,d))}return Boolean(e)}
function tb(a,b){var c=a.listener,d=a.R||a.src;a.O&&E(a);return c.call(d,b)}
function qb(a,b){if(a.F)return!0;if(!cb){var c;if(!(c=b))a:{c=["window","event"];for(var d=m,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new ib(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,k=e.length-1;!c.v&&0<=k;k--)c.currentTarget=e[k],d&=sb(e[k],f,!0,c);for(k=0;!c.v&&k<e.length;k++)c.currentTarget=
e[k],d&=sb(e[k],f,!1,c)}return d}return tb(a,new ib(b,this))}function ob(a){a=a[kb];return a instanceof w?a:null}var ub="__closure_events_fn_"+(1E9*Math.random()>>>0);function nb(a){return ca(a)?a:a[ub]||(a[ub]=function(b){return a.handleEvent(b)})};function vb(a){C.call(this);this.na=a;this.V={}}t(vb,C);var wb=[];l=vb.prototype;l.da=function(a,b,c,d,e){q(b)||(wb[0]=b,b=wb);for(var f=0;f<b.length;f++){var g=D(a,b[f],c||this,d||!1,e||this.na||this);if(!g)break;this.V[g.key]=g}return this};l.ha=function(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)this.ha(a,b[f],c,d,e);else e=e||this.na||this,c=nb(c||this),d=!!d,b=ua(a)?a.G(b,c,d,e):a?(a=ob(a))?a.G(b,c,d,e):null:null,b&&(E(b),delete this.V[b.key]);return this};
l.fa=function(){ya(this.V,E);this.V={}};l.b=function(){vb.h.b.call(this);this.fa()};l.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var xb;function yb(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function zb(a,b){for(var c=yb(a),d=Ha(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Ba(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e}function Ab(a,b){var c=yb(a),d=Ha(arguments,1),c=Bb(c,d);a.className=c.join(" ")}function Bb(a,b){return Da(a,function(a){return!(0<=Ba(b,a))})};var Cb=!y||y&&9<=bb;!z&&!y||y&&y&&9<=bb||z&&B("1.9.1");y&&B("9");function F(a,b){this.x=n(a)?a:0;this.y=n(b)?b:0}function Db(a){return new F(a.x,a.y)}l=F.prototype;l.toString=function(){return"("+this.x+", "+this.y+")"};function Eb(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}l.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};l.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};l.translate=function(a,b){a instanceof F?(this.x+=a.x,this.y+=a.y):(this.x+=a,"number"==typeof b&&(this.y+=b));return this};
l.scale=function(a,b){this.x*=a;this.y*="number"==typeof b?b:a;return this};function Fb(a){return a?new Gb(Hb(a)):xb||(xb=new Gb)}function Ib(a,b){ya(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Jb?a.setAttribute(Jb[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var Jb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function G(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!Cb&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',la(g.name),'"');if(g.type){f.push(' type="',la(g.type),'"');var k={};Aa(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=e.createElement(f);g&&(r(g)?f.className=g:q(g)?zb.apply(null,[f].concat(g)):Ib(f,g));2<d.length&&Kb(e,f,d);return f}
function Kb(a,b,c){function d(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];if(!ba(f)||da(f)&&0<f.nodeType)d(f);else{var g;a:{if(f&&"number"==typeof f.length){if(da(f)){g="function"==typeof f.item||"string"==typeof f.item;break a}if(ca(f)){g="function"==typeof f.item;break a}}g=!1}Ca(g?Ga(f):f,d)}}}function Lb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Mb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Hb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Nb(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Lb(a),a.appendChild(Hb(a).createTextNode(String(b)))}function Gb(a){this.P=a||m.document||document}Gb.prototype.createElement=function(a){return this.P.createElement(a)};Gb.prototype.createTextNode=function(a){return this.P.createTextNode(String(a))};
function Ob(a){var b=a.P;a=A||"CSS1Compat"!=b.compatMode?b.body:b.documentElement;b=b.parentWindow||b.defaultView;return y&&B("10")&&b.pageYOffset!=a.scrollTop?new F(a.scrollLeft,a.scrollTop):new F(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}Gb.prototype.appendChild=function(a,b){a.appendChild(b)};function H(a,b){this.text=this.a=null;this.ba=h();C.call(this);this.ba=b;this.a=G("div",{"class":"Button"});this.text=G("div",{"class":"ButtonTextContainer"},a);this.ja=new vb;this.ja.da(this.a,["click","touchend"],this.va,!0,this);this.a.appendChild(this.text)}t(H,C);H.prototype.va=function(a){a.preventDefault();this.ba(this)};H.prototype.show=function(){I(this.a,!0)};H.prototype.b=function(){Lb(this.a);Mb(this.a);this.a=null;this.ba=h();this.ja.i();H.h.b.call(this)};var Pb=G("div",{id:"PhoneWrapper"}),Qb=G("div",{id:"PhoneScreen"}),J=G("div",{"class":"TopNav"}),Rb=G("div",{id:"GameScreen","class":"screen"}),Sb=G("div",{id:"PartsScreen","class":"screen"}),Tb=G("div",{id:"SplashScreen","class":"screen"}),Ub=G("div",{id:"SongsScreen","class":"screen"}),Vb=G("div",{id:"AnimationStyles"});document.body.appendChild(Pb);Pb.appendChild(Qb);Qb.appendChild(Rb);Qb.appendChild(Sb);Qb.appendChild(Tb);Qb.appendChild(Ub);Qb.appendChild(J);document.body.appendChild(Vb);function Wb(){return A?"Webkit":z?"Moz":y?"ms":x?"O":null}function Xb(){return A?"-webkit":z?"-moz":y?"-ms":x?"-o":null}function Yb(a){var b=Wb();return b?(b=b.toLowerCase(),a=b+sa(a),!n(void 0)||a in void 0?a:null):null};function M(a,b,c){r(b)?Zb(a,c,b):ya(b,ja(Zb,a))}function Zb(a,b,c){(c=$b(a,c))&&(a.style[c]=b)}function $b(a,b){var c=ra(b);if(void 0===a.style[c]){var d=Wb()+sa(b);if(void 0!==a.style[d])return d}return c}function ac(a,b){var c;a:{c=Hb(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function bc(){var a=N,b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}y&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function cc(a){if(y&&!(y&&8<=bb))return a.offsetParent;var b=Hb(a),c=ac(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ac(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}function dc(a,b,c){if(void 0==c)throw Error("missing height argument");a.style.width=ec(b);a.style.height=ec(c)}
function ec(a){"number"==typeof a&&(a=Math.round(a)+"px");return a}function I(a,b){a.style.display=b?"":"none"}var fc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;var O=null,gc=null,hc=null,ic={};I(J,!1);O=new H("GRID",ic.Ma);gc=G("div",{id:"Title"},"unGRID");hc=new H("GRID",ic.Na);J.appendChild(O.a);J.appendChild(gc);J.appendChild(hc.a);function jc(a){"SCREEN_SONGS"==a?(O.text="SONGS",gc.text="SONGS",hc.text="SONGSFOO",I(J,!0)):"SCREEN_PARTS"==a?(O.text="SONGS",O.show(),gc.text="PARTS",I(hc.a,!1),I(J,!0)):"SCREEN_GAME"==a?(O.text="SONGS",O.show(),gc.text="GRID unLOCK!",I(hc.a,!1),I(J,!0)):I(J,!1)};var P={c:Tb,u:function(){P.H();P.q()},H:function(){var a=G("pre",{id:"gridBubbleDiv"},"\n _______  ______    ___   ______   \n|       ||    _ |  |   | |      |  \n|    ___||   | ||  |   | |  _    | \n|   | __ |   |_||_ |   | | | |   | \n|   ||  ||    __  ||   | | |_|   | \n|   |_| ||   |  | ||   | |       | \n|_______||___|  |_||___| |______|  \n  \t\t\t\t\t\t\t\t\t\n                 un                \n ___      _______  _______  ___   _  \n|   |    |       ||       ||   | | | \n|   |    |   _   ||       ||   |_| | \n|   |    |  | |  ||       ||      _| \n|   |___ |  |_|  ||      _||     |_  \n|       ||       ||     |_ |    _  | \n|_______||_______||_______||___| |_| \n");
P.c.appendChild(a)},Y:function(){I(P.c,!0)},q:function(){I(P.c,!1)}};P.u();var kc;function lc(a,b){q(b)||(b=[b]);var c=Ea(b,function(a){return r(a)?a:a.ra+" "+a.duration+"s "+a.timing+" "+a.ka+"s"});M(a,"transition",c.join(","))};var mc=[{name:"stage0",m:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},J:["red","green"]}]}];function nc(a){switch(a){case "n":return"s";case "s":return"n";case "e":return"w";case "w":return"e";default:return"w"}}function oc(a){switch(a){case "n":return new F(0,-1);case "s":return new F(0,1);case "w":return new F(-1,0);case "e":return new F(1,0)}return new F(0,0)}function pc(a){switch(a){case "n":return 90;case "s":return 270;case "e":return 180}return 0}function qc(a,b){var c=new F(a.x-b.x,a.y-b.y);return 0===c.x&&0<c.y?"n":0===c.x&&0>c.y?"s":0>c.x&&0===c.y?"e":0<c.x&&0===c.y?"w":null};var rc=[{name:"stage0",m:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},J:["red","green"]},{name:"verse2",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},J:["red","green"]}]},{name:"stage1",m:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,
1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},J:["red","green"]}]},{name:"stage2",m:[{name:"verse0",D:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],d:[],pattern:{},J:["red","green"]}]}];var Q={k:rc,Oa:function(a){Q.k=a?mc:rc},Ja:function(a,b,c){return{d:Q.za(a,b,c),B:0===Q.k[b].m[c].D[a.y][a.x]?!1:!0}},L:function(a,b,c){return 8<=a.x||0>a.x?0:8<=a.y||0>a.y?0:Q.k[b].m[c].D[a.y][a.x]},za:function(a,b,c){for(var d={n:!1,e:!1,s:!1,w:!1},e=Q.L(a,b,c),f=[a.x,a.y],g=Q.k[b].m[c],k=0;k<g.d.length;k++){var p=g.d[k][0],s=g.d[k][1];f[0]===p[0]&&f[1]===p[1]?d[qc(p,s)]=!0:f[0]===s[0]&&f[1]===s[1]&&(d[qc(s,p)]=!0)}Q.S(e,Q.L(new F(a.x+1,a.y),b,c))&&(d.e=!0);Q.S(e,Q.L(new F(a.x-1,a.y),b,c))&&(d.w=
!0);Q.S(e,Q.L(new F(a.x,a.y-1),b,c))&&(d.n=!0);Q.S(e,Q.L(new F(a.x,a.y+1),b,c))&&(d.s=!0);return d},S:function(a,b){return 0===a&&1===b||0===b&&1===a},La:function(a){return Q.k[a].m.length},xa:function(a,b){return Q.k[a].m[b].J}};var R={k:Q,c:Ub,Z:null,K:[],u:function(){R.k=Q.k;R.Ia=Q.Ia;R.H();R.q()},H:function(){R.Z=G("div",{id:"SongButtons"});R.Da();R.c.appendChild(R.Z)},Da:function(){for(var a=0;a<rc.length;a++){var b=rc[a],c=new H(b.name,R.Fa);R.K.push({button:c,data:b,index:a});R.Z.appendChild(c.a)}},ia:function(){R.K=null;Lb(R.Z)},Fa:function(a){for(var b=null,c=0;c<R.K.length;c++)if(R.K[c].button===a){b=R.K[c].index;break}0<=b?(sc=b,S.showparts()):console.log("No song obj for the clicked songButton. W.T.F.?")},Y:function(){I(R.c,
!0)},q:function(){I(R.c,!1)}};R.u();function tc(a){this.position=a;this.d={};this.B=!1}tc.prototype.reset=function(){this.d={};this.B=!1};var N=G("div",{id:"BoardView"}),uc=G("canvas",{id:"TileCanvas"}),T=null;function vc(){var a=T;a.save();a.translate(39.9,39.9);a.strokeStyle="#999";a.lineWidth=1;for(var b=0;9>b;b++)a.beginPath(),a.moveTo(0,70*b),a.lineTo(560,70*b),a.stroke();for(b=0;9>b;b++)a.beginPath(),a.moveTo(70*b,0),a.lineTo(70*b,560),a.stroke();a.restore()}
function wc(a){var b;if(1==N.nodeType){var c;if(N.getBoundingClientRect)c=bc(),c=new F(c.left,c.top);else{c=Ob(Fb(N));var d,e=Hb(N),f=ac(N,"position"),g=z&&e.getBoxObjectFor&&!N.getBoundingClientRect&&"absolute"==f&&(d=e.getBoxObjectFor(N))&&(0>d.screenX||0>d.screenY),k=new F(0,0),p;d=e?Hb(e):document;(p=!y)||(p=y&&9<=bb)||(p="CSS1Compat"==Fb(d).P.compatMode);p=p?d.documentElement:d.body;if(N!=p)if(N.getBoundingClientRect)d=bc(),e=Ob(Fb(e)),k.x=d.left+e.x,k.y=d.top+e.y;else if(e.getBoxObjectFor&&
!g)d=e.getBoxObjectFor(N),e=e.getBoxObjectFor(p),k.x=d.screenX-e.screenX,k.y=d.screenY-e.screenY;else{g=N;do{k.x+=g.offsetLeft;k.y+=g.offsetTop;g!=N&&(k.x+=g.clientLeft||0,k.y+=g.clientTop||0);if(A&&"fixed"==ac(g,"position")){k.x+=e.body.scrollLeft;k.y+=e.body.scrollTop;break}g=g.offsetParent}while(g&&g!=N);if(x||A&&"absolute"==f)k.y-=e.body.offsetTop;for(g=N;(g=cc(g))&&g!=e.body&&g!=p;)k.x-=g.scrollLeft,x&&"TR"==g.tagName||(k.y-=g.scrollTop)}c=new F(k.x-c.x,k.y-c.y)}if(z&&!B(12)){y?b="-ms-transform":
A?b="-webkit-transform":x?b="-o-transform":z&&(b="-moz-transform");var s;b&&(s=ac(N,b));s||(s=ac(N,"transform"));b=s?(b=s.match(fc))?new F(parseFloat(b[1]),parseFloat(b[2])):new F(0,0):new F(0,0);b=new F(c.x+b.x,c.y+b.y)}else b=c}else b=ca(N.ya),s=N,N.targetTouches?s=N.targetTouches[0]:b&&N.C.targetTouches&&(s=N.C.targetTouches[0]),b=new F(s.clientX,s.clientY);a=Db(new F(a.clientX-b.x,a.clientY-b.y)).translate(-39.9,-39.9);a.scale(1/70);return a.floor()}N.appendChild(uc);T=uc.getContext("2d");
dc(N,639.8,639.8);dc(uc,639.8,639.8);T.canvas.width=639.8;T.canvas.height=639.8;Rb.appendChild(N);D(N,["touchstart","mousedown"],function(a){a.preventDefault();a=wc(a);var b=xc(a);b&&b.B?(b=yc(a),null!==b?(U=b,zc=!1):(b=Ac,null!==b?(b=new V(b),b.setPosition(a),Bc.push(b),U=b,zc=!0,N.appendChild(b.view.a)):Cc())):(U=null,zc=!1,Cc())});
D(N,["touchend","mouseup"],function(a){a.preventDefault();a=wc(a);if(yc(a)===U&&!zc){a=U;var b=a.type;Ac=b;for(var c=0;c<W.length;c++){var d=W[c];d.type===b?Dc(d.view,!0):Dc(d.view,!1)}Fa(Bc,a)&&a.i()}U=null;zc=!1;Cc()});D(N,["touchmove","mousemove"],function(a){a.preventDefault();var b=wc(a);a=U;null!==a&&(b=qc(a.position,b),null!==b&&a.direction!==b&&(a.direction=b,Ec(a.view)))});var Fc=Array(8);function xc(a){var b=a.x,c=a.y;return 0<=b&&8>b&&0<=c&&8>c?Fc[a.y][a.x]:null}function Gc(a){for(var b=0;8>b;b++)for(var c=0;8>c;c++){var d=new F(b,c);a(xc(d),d)}}function Hc(){T.clearRect(0,0,uc.width,uc.height);Gc(function(a){a.reset()})}
function Ic(){vc();Gc(function(a){T.save();T.translate(39.9,39.9);var b=T;if(a.B){var c=Db(a.position).scale(70);a.d.s&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x+3.5,c.y+70),b.lineTo(c.x+70-3.5,c.y+70),b.stroke());a.d.n&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x+3.5,c.y),b.lineTo(c.x+70-3.5,c.y),b.stroke());a.d.w&&(b.beginPath(),b.lineWidth=3.5,b.strokeStyle="#fff",b.moveTo(c.x,c.y+3.5),b.lineTo(c.x,c.y+70-3.5),b.stroke());a.d.e&&(b.beginPath(),b.lineWidth=
3.5,b.strokeStyle="#fff",b.moveTo(c.x+70,c.y+3.5),b.lineTo(c.x+70,c.y+70-3.5),b.stroke())}T.restore()})}for(var Jc=0;8>Jc;Jc++)Fc[Jc]=Array(8);for(var Kc=0;8>Kc;Kc++)for(var Lc=0;8>Lc;Lc++)Fc[Lc][Kc]=new tc(new F(Kc,Lc));var Ac=null,W=[],Mc=G("div",{id:"PieceSelection"});function Nc(){for(var a=0;a<W.length;a++)W[a].i();W=[]}function Cc(){for(var a=0;a<W.length;a++)Dc(W[a].view,!1);Ac=null}Rb.appendChild(Mc);D(Mc,["touchend","click"],function(a){a=yb(a.target);for(var b=0;b<W.length;b++){var c=W[b];0<=Ba(a,c.type)?(Ac=c.type,Dc(c.view,!0)):Dc(c.view,!1)}});function Oc(a){C.call(this);this.o=a;this.a=G("div",{"class":"PieceView"});this.A=G("canvas",{id:"PieceViewCanvas"});this.context=this.A.getContext("2d");this.N=0;this.size();a=this.context;a.moveTo(47.6,11.2);a.lineTo(11.2,35);a.lineTo(47.6,58.8);a.strokeStyle=Pc(this.o.type);a.lineWidth=11.2;a.lineCap="round";a.lineJoin="round";a.stroke();this.a.appendChild(this.A);zb(this.A,this.o.type)}t(Oc,C);Oc.prototype.b=function(){Lb(this.a);Mb(this.a);this.o=this.a=null;Oc.h.b.call(this)};
function Dc(a,b){b?zb(a.A,"selected"):Ab(a.A,"selected")}Oc.prototype.size=function(){dc(this.A,70,70);this.context.canvas.height=70;this.context.canvas.width=70};function Ec(a){var b=a.o,c=b.direction,b=Db(b.position).scale(70).translate(39.9,39.9),b=u("translate( ",b.x,"px , ",b.y,"px)"),c=pc(c)-a.N%360;-180>c?c+=360:180<c&&(c-=360);a.N+=c;c=u(b,u("rotate( ",a.N,"deg) "));M(a.a,"transition","");M(a.a,{transform:c,transition:u(Xb(),"-transform 50ms")})};function Qc(a){C.call(this);this.o=a;this.style=G("style",{id:"animStyle_"+a.uid});this.animationName="animation_"+a.uid;Vb.appendChild(this.style)}t(Qc,C);
function Rc(a,b,c){a=u("@",b,"keyframes ",a.animationName," { \n");for(var d=c.length,e=0;e<d;e++){var f=u,g=(100*(e/(d-1))).toFixed(2),k=b,k=k||"",p=c[e].view.o,s=Db(p.position).scale(70).translate(39.9,39.9);a=u(a,f(g,"% {",u(k,"transform : ",u("translate( ",s.x,"px , ",s.y,"px) "),u("rotate( ",pc(p.direction),"deg) "),"; "),"} \n"))}return a=u(a,"} \n")}Qc.prototype.b=function(){Lb(this.style);Mb(this.style);this.o=this.style=null;Qc.h.b.call(this)};function Sc(a){this.o=a;C.call(this)}t(Sc,C);Sc.prototype.b=function(){this.o=null;Sc.h.b.call(this)};function Tc(a,b){C.call(this);this.position=a;this.direction=b;this.view=new Sc(this)}t(Tc,C);Tc.prototype.b=function(){this.view.i();this.view=null;Tc.h.b.call(this)};function Uc(){C.call(this);this.l=[];this.uid=Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ka()).toString(36);this.view=new Qc(this)}t(Uc,C);function Vc(a){var b=a.l.length;if(1<b){var c=a.l[0].position,d=a.l[b-1].position;return a.l[b-1].direction===a.l[0].direction&&Eb(c,d)}return!1}Uc.prototype.b=function(){for(var a=0;a<this.l.length;a++)this.l[a].i();this.l=null;this.view.i();this.view=null;Uc.h.b.call(this)};function V(a){C.call(this);this.type=a||Wc;this.direction="w";this.position=new F(-1,-1);this.t=new Uc;this.view=new Oc(this)}t(V,C);V.prototype.setPosition=function(a){Eb(a,this.position)||(this.position=a,Ec(this.view))};V.prototype.b=function(){this.t.i();this.t=null;this.view.i();this.view=null;V.h.b.call(this)};
V.prototype.play=function(){var a=this.t.view,b=this.t.l,c=Xb()+"-",d;d=u("",Rc(a,"",b));d=u(d,Rc(a,c,b));Nb(a.style,d);b=this.view.a.style;a=u(a.animationName," ","2s"," linear infinite");n(b.animation)?(b.animation=a,b.animationPlayState="running"):n(b[Yb("animation")])&&(b[Yb("animation")]=a,b[Yb("animationPlayState")]="running")};V.prototype.stop=function(){var a=this.view.a.style;n(a.animation)?a.animation="":n(a[Yb("animation")])&&(a[Yb("animation")]="")};var Wc="red";
function Pc(a){switch(a){case "green":return"#53CC66";case "blue":return"#0092D2";case "yellow":return"#F58107";case "purple":return"#CA60CA"}return"#d4463f"};var Bc=[];function Xc(){Yc(function(a){a.i()});Bc=[];Nc()}function Yc(a){for(var b=0,c=Bc.length;b<c;b++)a(Bc[b],b)}function yc(a){var b=null;Yc(function(c){Eb(c.position,a)&&(b=c)});return b}function Zc(){Yc(function(a){a.play()})}function $c(){Yc(function(a){a.stop()})}var U=null,zc=!1;var ad=!1;function bd(){Yc(function(a){var b=new Tc(a.position,a.direction);a.t.i();for(a.t=new Uc;!Vc(a.t);)a.t.l.push(b),b=xc(b.position).d[b.direction]?new Tc(xc(b.position).position,nc(b.direction)):new Tc(new F(xc(b.position).position.x+oc(b.direction).x,xc(b.position).position.y+oc(b.direction).y),b.direction)})}var cd=0;Xc();cd=cd||0;(function(a){Hc();Gc(function(b,c){var d=Q.Ja(c,0,a);b.d=d.d;b.B=d.B});Ic()})(cd);var dd=cd;Xc();
for(var ed=Q.xa(0,dd),fd=0;fd<ed.length;fd++){var gd=new V(ed[fd]);W.push(gd);Mc.appendChild(gd.view.a)};var X={c:Rb,qa:null,u:function(){X.q();X.qa=new H("PLAY",X.Ga);X.c.appendChild(X.qa.a)},Y:function(){I(X.c,!0)},q:function(){I(X.c,!1)},Ga:function(a){ad?(ad&&(ad=!1,$c()),Nb(a.text,"PLAY"),Ab(a.a,"playing")):(ad||(ad=!0,bd(),Zc()),Nb(a.text,"STOP"),zb(a.a,"playing"))}};X.u();function Y(){C.call(this);this.p=new w(this);this.ua=this}t(Y,C);Y.prototype[ta]=!0;l=Y.prototype;l.ea=null;l.addEventListener=function(a,b,c,d){D(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){rb(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.ea;if(c)for(b=[];c;c=c.ea)b.push(c);var c=this.ua,d=a.type||a;if(r(a))a=new gb(a,c);else if(a instanceof gb)a.target=a.target||c;else{var e=a;a=new gb(d,c);Aa(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.v&&0<=g;g--)f=a.currentTarget=b[g],e=hd(f,d,!0,a)&&e;a.v||(f=a.currentTarget=c,e=hd(f,d,!0,a)&&e,a.v||(e=hd(f,d,!1,a)&&e));if(b)for(g=0;!a.v&&g<b.length;g++)f=a.currentTarget=b[g],e=hd(f,d,!1,a)&&e;return e};
l.b=function(){Y.h.b.call(this);this.p&&this.p.fa(void 0);this.ea=null};l.da=function(a,b,c,d){return this.p.add(a,b,!1,c,d)};l.ha=function(a,b,c,d){return this.p.remove(a,b,c,d)};function hd(a,b,c,d){b=a.p.f[b];if(!b)return!0;b=Ga(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.F&&g.capture==c){var k=g.listener,p=g.R||g.src;g.O&&Ja(a.p,g);e=!1!==k.call(p,d)&&e}}return e&&!1!=d.sa}l.G=function(a,b,c,d){return this.p.G(a,b,c,d)};function id(){Y.call(this);this.$=jd;this.startTime=null}t(id,Y);var jd=0;function kd(a,b,c){if(ca(a))c&&(a=ia(a,c));else if(a&&"function"==typeof a.handleEvent)a=ia(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:m.setTimeout(a,b||0)};function ld(a,b,c,d,e){id.call(this);this.j=a;this.wa=b;this.Ca=c;this.ma=d;this.Ka=q(e)?e:[e]}t(ld,id);l=ld.prototype;
l.play=function(){if(1==this.$)return!1;this.dispatchEvent("begin");this.dispatchEvent("play");this.startTime=ka();this.$=1;if(!n(kc))if(y)kc=B("10.0");else{var a=document.createElement("div"),b=Xb();a.innerHTML='<div style="'+(b?b+"-transition:opacity 1s linear;":"")+'transition:opacity 1s linear;">';a=a.firstChild;b=a.style[ra("transition")];kc=""!=("undefined"!==typeof b?b:a.style[$b(a,"transition")]||"")}if(kc)return M(this.j,this.Ca),this.ta=kd(this.Ha,void 0,this),!0;this.ga(!1);return!1};
l.Ha=function(){lc(this.j,this.Ka);M(this.j,this.ma);this.ta=kd(ia(this.ga,this,!1),1E3*this.wa)};l.stop=function(){1==this.$&&this.ga(!0)};l.ga=function(a){M(this.j,"transition","");m.clearTimeout(this.ta);M(this.j,this.ma);ka();this.$=jd;a?this.dispatchEvent("stop"):this.dispatchEvent("finish");this.dispatchEvent("end")};l.b=function(){this.stop();ld.h.b.call(this)};var sc=-1;var Z={k:Q,c:Sb,W:null,I:[],u:function(){Z.H();Z.q()},H:function(){Z.W=G("div",{id:"PartsButtons"});Z.oa();Z.c.appendChild(Z.W)},oa:function(){var a=sc;if(0<=a)for(var a=rc[a].m,b=0;b<a.length;b++){var c=a[b],d=new H(c.name,Z.Ea);Z.I.push({button:d,data:c,index:b});Z.W.appendChild(d.a)}},ia:function(){Z.I=[];Lb(Z.W)},Ea:function(a){for(var b=-1,c=0;c<Z.I.length;c++)if(Z.I[c].button===a){b=Z.I[c].index;break}0<=b?(sc=b,S.showgame()):console.log("No song obj for the clicked partButton. W.T.F.?")},Y:function(){Z.oa();
I(Z.c,!0)},q:function(){Z.ia();I(Z.c,!1)}};Z.u();var $={};function md(a){var b=new ld($[a].c,0.15,{opacity:0},{opacity:1},{ra:"opacity",duration:0.15,timing:"ease-in",ka:0});D(b,"finish",h());$[a].Y();b.play()}function nd(a){var b=new ld($[a].c,0.15,{opacity:1},{opacity:0},{ra:"opacity",duration:0.15,timing:"ease-in",ka:0});D(b,"finish",function(){S.transition();$[a].q()});b.play()}$.SCREEN_SPLASH=P;$.SCREEN_SONGS=R;$.SCREEN_PARTS=Z;$.SCREEN_GAME=X;function od(){var a=pd;setTimeout(function(){a()},1500)};var S={};function pd(){S.showsongs()}
S=StateMachine.create({events:[{name:"start",from:"none",to:"splash"},{name:"showsongs",from:["splash","parts","game"],to:"songs"},{name:"showparts",from:["songs","game"],to:"parts"},{name:"showgame",from:["splash","parts","songs"],to:"game"}],callbacks:{onbeforestart:h(),onbeforeshowsongs:h(),onbeforeshowparts:h(),onbeforeshowgame:h(),onstart:function(){md("SCREEN_SPLASH");od();jc("SCREEN_SPLASH")},onshowsongs:function(){md("SCREEN_SONGS");jc("SCREEN_SONGS")},onshowparts:function(){md("SCREEN_PARTS");
jc("SCREEN_PARTS")},onshowgame:function(){md("SCREEN_GAME");jc("SCREEN_GAME")},onleavesplash:function(){nd("SCREEN_SPLASH");return StateMachine.ASYNC},onleavesongs:function(){nd("SCREEN_SONGS");return StateMachine.ASYNC},onleaveparts:function(){nd("SCREEN_PARTS");return StateMachine.ASYNC},onleavegame:function(){nd("SCREEN_GAME");return StateMachine.ASYNC},onsplash:function(){console.log("ENTER   STATE: onsplash")},onsongs:function(){console.log("ENTER   STATE: onsongs")},onparts:function(){console.log("ENTER   STATE: onparts")},
ongame:function(){console.log("ENTER   STATE: ongame")},onchangestate:function(a,b,c){console.log("CHANGED STATE: "+b+" to "+c)}}});function qd(a,b,c,d,e){if(!(y||A&&B("525")))return!0;if(Sa&&e)return rd(a);if(e&&!d||!c&&(17==b||18==b||Sa&&91==b))return!1;if(A&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(y&&d&&b==a)return!1;switch(a){case 13:return!(y&&y&&9<=bb);case 27:return!A}return rd(a)}
function rd(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||A&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function sd(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function td(a,b){Y.call(this);a&&(this.U&&this.detach(),this.j=a,this.T=D(this.j,"keypress",this,b),this.ca=D(this.j,"keydown",this.Aa,b,this),this.U=D(this.j,"keyup",this.Ba,b,this))}t(td,Y);l=td.prototype;l.j=null;l.T=null;l.ca=null;l.U=null;l.g=-1;l.r=-1;l.aa=!1;
var ud={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},vd={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},wd=y||A&&B("525"),xd=Sa&&z;l=td.prototype;
l.Aa=function(a){A&&(17==this.g&&!a.ctrlKey||18==this.g&&!a.altKey||Sa&&91==this.g&&!a.metaKey)&&(this.r=this.g=-1);-1==this.g&&(a.ctrlKey&&17!=a.keyCode?this.g=17:a.altKey&&18!=a.keyCode?this.g=18:a.metaKey&&91!=a.keyCode&&(this.g=91));wd&&!qd(a.keyCode,this.g,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.r=z?sd(a.keyCode):a.keyCode,xd&&(this.aa=a.altKey))};l.Ba=function(a){this.r=this.g=-1;this.aa=a.altKey};
l.handleEvent=function(a){var b=a.C,c,d,e=b.altKey;y&&"keypress"==a.type?(c=this.r,d=13!=c&&27!=c?b.keyCode:0):A&&"keypress"==a.type?(c=this.r,d=0<=b.charCode&&63232>b.charCode&&rd(c)?b.charCode:0):x?(c=this.r,d=rd(c)?b.keyCode:0):(c=b.keyCode||this.r,d=b.charCode||0,xd&&(e=this.aa),Sa&&63==d&&224==c&&(c=191));var f=c,g=b.keyIdentifier;c?63232<=c&&c in ud?f=ud[c]:25==c&&a.shiftKey&&(f=9):g&&g in vd&&(f=vd[g]);a=f==this.g;this.g=f;b=new yd(f,d,a,b);b.altKey=e;this.dispatchEvent(b)};
l.detach=function(){this.T&&(E(this.T),E(this.ca),E(this.U),this.U=this.ca=this.T=null);this.j=null;this.r=this.g=-1};l.b=function(){td.h.b.call(this);this.detach()};function yd(a,b,c,d){d&&jb(this,d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(yd,ib);var zd=new td(document);D(zd,"key",function(a){71==a.keyCode?S.showgame():83==a.keyCode?S.showsongs():80==a.keyCode?S.showparts():76==a.keyCode&&S.showsplash()});console.log("GRID version 0.0.2");S.start();})();
